{% extends "base.html" %}
{% block title %}FYQ - Preguntas frecuentes{% endblock %}

{% block content %}
<section class="faq-hero container" aria-labelledby="faq-title">
  <h1 id="faq-title" class="faq-title">Preguntas Frecuentes</h1>
  <p class="faq-sub">Respuestas rápidas sobre mi trabajo, proceso y servicios.</p>

  <div class="faq-controls">
    <input id="faqSearch" class="faq-search" type="search" placeholder="Buscar en las preguntas…" aria-label="Buscar preguntas" />
    <div class="faq-actions">
      <button id="btnExpandAll" class="btn outline" type="button">Expandir todo</button>
      <button id="btnCollapseAll" class="btn ghost" type="button">Contraer todo</button>
    </div>
  </div>
</section>

<section class="faq-list container" id="faqList">
  {% for q in questions %}
  <article class="faq-item" id="q-{{ q.id }}">
    <h3 class="faq-q-wrap">
      <button
        class="faq-q"
        aria-expanded="false"
        aria-controls="a-{{ q.id }}"
        data-faq-id="{{ q.id }}"
      >
        <span class="q-bullet" aria-hidden="true">Q</span>
        <span class="q-text">{{ q.title }}</span>
        <svg class="q-icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </h3>
    <div id="a-{{ q.id }}" class="faq-a" hidden>
      <div class="faq-a-inner">
        {{ q.answer|linebreaksbr }}
      </div>
    </div>
  </article>
  {% empty %}
  <p id="faq-empty" class="faq-empty">Aún no hay preguntas cargadas.</p>
  {% endfor %}
</section>
{% endblock %}

{% block scripts %}
  <script src="/assets/js/faq.js"></script>

  {# SEO: JSON-LD FAQPage #}
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {% for q in questions %}
      {
        "@type":"Question",
        "name":"{{ q.title|escapejs }}",
        "acceptedAnswer":{"@type":"Answer","text":"{{ q.answer|escapejs }}"}
      }{% if not forloop.last %},{% endif %}
      {% endfor %}
    ]
  }
  </script>
{% endblock %}
